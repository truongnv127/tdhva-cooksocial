{"ast":null,"code":"import _objectSpread from \"/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { convertArrayBufferToBase64Url } from '../../../foundation/convert/base64url/convertArrayBufferToBase64Url.mjs';\nimport { convertBase64UrlToArrayBuffer } from '../../../foundation/convert/base64url/convertBase64UrlToArrayBuffer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Deserializes Public Key Credential Creation Options JSON\n * @param input PasskeyCreateOptionsJson\n * @returns PublicKeyCredentialCreationOptions\n */\nconst deserializeJsonToPkcCreationOptions = input => {\n  const userIdBuffer = convertBase64UrlToArrayBuffer(input.user.id);\n  const challengeBuffer = convertBase64UrlToArrayBuffer(input.challenge);\n  const excludeCredentialsWithBuffer = (input.excludeCredentials || []).map(excludeCred => _objectSpread(_objectSpread({}, excludeCred), {}, {\n    id: convertBase64UrlToArrayBuffer(excludeCred.id)\n  }));\n  return _objectSpread(_objectSpread({}, input), {}, {\n    excludeCredentials: excludeCredentialsWithBuffer,\n    challenge: challengeBuffer,\n    user: _objectSpread(_objectSpread({}, input.user), {}, {\n      id: userIdBuffer\n    })\n  });\n};\n/**\n * Serializes a Public Key Credential With Attestation to JSON\n * @param input PasskeyCreateResult\n * @returns PasskeyCreateResultJson\n */\nconst serializePkcWithAttestationToJson = input => {\n  const response = {\n    clientDataJSON: convertArrayBufferToBase64Url(input.response.clientDataJSON),\n    attestationObject: convertArrayBufferToBase64Url(input.response.attestationObject),\n    transports: input.response.getTransports(),\n    publicKeyAlgorithm: input.response.getPublicKeyAlgorithm(),\n    authenticatorData: convertArrayBufferToBase64Url(input.response.getAuthenticatorData())\n  };\n  const publicKey = input.response.getPublicKey();\n  if (publicKey) {\n    response.publicKey = convertArrayBufferToBase64Url(publicKey);\n  }\n  const resultJson = {\n    type: input.type,\n    id: input.id,\n    rawId: convertArrayBufferToBase64Url(input.rawId),\n    clientExtensionResults: input.getClientExtensionResults(),\n    response\n  };\n  if (input.authenticatorAttachment) {\n    resultJson.authenticatorAttachment = input.authenticatorAttachment;\n  }\n  return resultJson;\n};\n/**\n * Deserializes Public Key Credential Get Options JSON\n * @param input PasskeyGetOptionsJson\n * @returns PublicKeyCredentialRequestOptions\n */\nconst deserializeJsonToPkcGetOptions = input => {\n  const challengeBuffer = convertBase64UrlToArrayBuffer(input.challenge);\n  const allowedCredentialsWithBuffer = (input.allowCredentials || []).map(allowedCred => _objectSpread(_objectSpread({}, allowedCred), {}, {\n    id: convertBase64UrlToArrayBuffer(allowedCred.id)\n  }));\n  return _objectSpread(_objectSpread({}, input), {}, {\n    challenge: challengeBuffer,\n    allowCredentials: allowedCredentialsWithBuffer\n  });\n};\n/**\n * Serializes a Public Key Credential With Attestation to JSON\n * @param input PasskeyGetResult\n * @returns PasskeyGetResultJson\n */\nconst serializePkcWithAssertionToJson = input => {\n  const response = {\n    clientDataJSON: convertArrayBufferToBase64Url(input.response.clientDataJSON),\n    authenticatorData: convertArrayBufferToBase64Url(input.response.authenticatorData),\n    signature: convertArrayBufferToBase64Url(input.response.signature)\n  };\n  if (input.response.userHandle) {\n    response.userHandle = convertArrayBufferToBase64Url(input.response.userHandle);\n  }\n  const resultJson = {\n    id: input.id,\n    rawId: convertArrayBufferToBase64Url(input.rawId),\n    type: input.type,\n    clientExtensionResults: input.getClientExtensionResults(),\n    response\n  };\n  if (input.authenticatorAttachment) {\n    resultJson.authenticatorAttachment = input.authenticatorAttachment;\n  }\n  return resultJson;\n};\nexport { deserializeJsonToPkcCreationOptions, deserializeJsonToPkcGetOptions, serializePkcWithAssertionToJson, serializePkcWithAttestationToJson };","map":{"version":3,"names":["deserializeJsonToPkcCreationOptions","input","userIdBuffer","convertBase64UrlToArrayBuffer","user","id","challengeBuffer","challenge","excludeCredentialsWithBuffer","excludeCredentials","map","excludeCred","_objectSpread","serializePkcWithAttestationToJson","response","clientDataJSON","convertArrayBufferToBase64Url","attestationObject","transports","getTransports","publicKeyAlgorithm","getPublicKeyAlgorithm","authenticatorData","getAuthenticatorData","publicKey","getPublicKey","resultJson","type","rawId","clientExtensionResults","getClientExtensionResults","authenticatorAttachment","deserializeJsonToPkcGetOptions","allowedCredentialsWithBuffer","allowCredentials","allowedCred","serializePkcWithAssertionToJson","signature","userHandle"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@aws-amplify/auth/src/client/utils/passkey/serde.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { convertArrayBufferToBase64Url, convertBase64UrlToArrayBuffer, } from '../../../foundation/convert';\n/**\n * Deserializes Public Key Credential Creation Options JSON\n * @param input PasskeyCreateOptionsJson\n * @returns PublicKeyCredentialCreationOptions\n */\nexport const deserializeJsonToPkcCreationOptions = (input) => {\n    const userIdBuffer = convertBase64UrlToArrayBuffer(input.user.id);\n    const challengeBuffer = convertBase64UrlToArrayBuffer(input.challenge);\n    const excludeCredentialsWithBuffer = (input.excludeCredentials || []).map(excludeCred => ({\n        ...excludeCred,\n        id: convertBase64UrlToArrayBuffer(excludeCred.id),\n    }));\n    return {\n        ...input,\n        excludeCredentials: excludeCredentialsWithBuffer,\n        challenge: challengeBuffer,\n        user: {\n            ...input.user,\n            id: userIdBuffer,\n        },\n    };\n};\n/**\n * Serializes a Public Key Credential With Attestation to JSON\n * @param input PasskeyCreateResult\n * @returns PasskeyCreateResultJson\n */\nexport const serializePkcWithAttestationToJson = (input) => {\n    const response = {\n        clientDataJSON: convertArrayBufferToBase64Url(input.response.clientDataJSON),\n        attestationObject: convertArrayBufferToBase64Url(input.response.attestationObject),\n        transports: input.response.getTransports(),\n        publicKeyAlgorithm: input.response.getPublicKeyAlgorithm(),\n        authenticatorData: convertArrayBufferToBase64Url(input.response.getAuthenticatorData()),\n    };\n    const publicKey = input.response.getPublicKey();\n    if (publicKey) {\n        response.publicKey = convertArrayBufferToBase64Url(publicKey);\n    }\n    const resultJson = {\n        type: input.type,\n        id: input.id,\n        rawId: convertArrayBufferToBase64Url(input.rawId),\n        clientExtensionResults: input.getClientExtensionResults(),\n        response,\n    };\n    if (input.authenticatorAttachment) {\n        resultJson.authenticatorAttachment = input.authenticatorAttachment;\n    }\n    return resultJson;\n};\n/**\n * Deserializes Public Key Credential Get Options JSON\n * @param input PasskeyGetOptionsJson\n * @returns PublicKeyCredentialRequestOptions\n */\nexport const deserializeJsonToPkcGetOptions = (input) => {\n    const challengeBuffer = convertBase64UrlToArrayBuffer(input.challenge);\n    const allowedCredentialsWithBuffer = (input.allowCredentials || []).map(allowedCred => ({\n        ...allowedCred,\n        id: convertBase64UrlToArrayBuffer(allowedCred.id),\n    }));\n    return {\n        ...input,\n        challenge: challengeBuffer,\n        allowCredentials: allowedCredentialsWithBuffer,\n    };\n};\n/**\n * Serializes a Public Key Credential With Attestation to JSON\n * @param input PasskeyGetResult\n * @returns PasskeyGetResultJson\n */\nexport const serializePkcWithAssertionToJson = (input) => {\n    const response = {\n        clientDataJSON: convertArrayBufferToBase64Url(input.response.clientDataJSON),\n        authenticatorData: convertArrayBufferToBase64Url(input.response.authenticatorData),\n        signature: convertArrayBufferToBase64Url(input.response.signature),\n    };\n    if (input.response.userHandle) {\n        response.userHandle = convertArrayBufferToBase64Url(input.response.userHandle);\n    }\n    const resultJson = {\n        id: input.id,\n        rawId: convertArrayBufferToBase64Url(input.rawId),\n        type: input.type,\n        clientExtensionResults: input.getClientExtensionResults(),\n        response,\n    };\n    if (input.authenticatorAttachment) {\n        resultJson.authenticatorAttachment = input.authenticatorAttachment;\n    }\n    return resultJson;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}