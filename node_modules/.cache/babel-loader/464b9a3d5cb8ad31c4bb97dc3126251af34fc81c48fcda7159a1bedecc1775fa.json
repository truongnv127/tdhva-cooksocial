{"ast":null,"code":"import { AuthError } from '../../../errors/AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * It will retry the function if the error is a `ResourceNotFoundException` and\n * will clean the device keys stored in the storage mechanism.\n *\n */\nasync function retryOnResourceNotFoundException(func, args, username, tokenOrchestrator) {\n  try {\n    return await func(...args);\n  } catch (error) {\n    if (error instanceof AuthError && error.name === 'ResourceNotFoundException' && error.message.includes('Device does not exist.')) {\n      await tokenOrchestrator.clearDeviceMetadata(username);\n      return func(...args);\n    }\n    throw error;\n  }\n}\nexport { retryOnResourceNotFoundException };","map":{"version":3,"names":["retryOnResourceNotFoundException","func","args","username","tokenOrchestrator","error","AuthError","name","message","includes","clearDeviceMetadata"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/node_modules/@aws-amplify/auth/src/providers/cognito/utils/retryOnResourceNotFoundException.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../errors/AuthError';\n/**\n * It will retry the function if the error is a `ResourceNotFoundException` and\n * will clean the device keys stored in the storage mechanism.\n *\n */\nexport async function retryOnResourceNotFoundException(func, args, username, tokenOrchestrator) {\n    try {\n        return await func(...args);\n    }\n    catch (error) {\n        if (error instanceof AuthError &&\n            error.name === 'ResourceNotFoundException' &&\n            error.message.includes('Device does not exist.')) {\n            await tokenOrchestrator.clearDeviceMetadata(username);\n            return func(...args);\n        }\n        throw error;\n    }\n}\n"],"mappings":";;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeA,gCAAgCA,CAACC,IAAI,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,iBAAiB,EAAE;EAC5F,IAAI;IACA,OAAO,MAAMH,IAAI,CAAC,GAAGC,IAAI,CAAC;EAC9B,EACA,OAAOG,KAAK,EAAE;IACV,IAAIA,KAAK,YAAYC,SAAS,IAC1BD,KAAK,CAACE,IAAI,KAAK,2BAA2B,IAC1CF,KAAK,CAACG,OAAO,CAACC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;MAClD,MAAML,iBAAiB,CAACM,mBAAmB,CAACP,QAAQ,CAAC;MACrD,OAAOF,IAAI,CAAC,GAAGC,IAAI,CAAC;IACxB;IACA,MAAMG,KAAK;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}