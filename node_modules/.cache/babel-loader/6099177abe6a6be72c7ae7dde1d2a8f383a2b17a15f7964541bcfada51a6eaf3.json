{"ast":null,"code":"import { decodeJWT, assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { AuthTokenStorageKeys } from './types.mjs';\nimport { assert, TokenProviderErrorCode } from './errorHelpers.mjs';\nimport { AUTH_KEY_PREFIX } from './constants.mjs';\nclass DefaultTokenStore {\n  getKeyValueStorage() {\n    if (!this.keyValueStorage) {\n      throw new AuthError({\n        name: 'KeyValueStorageNotFoundException',\n        message: 'KeyValueStorage was not found in TokenStore'\n      });\n    }\n    return this.keyValueStorage;\n  }\n  setKeyValueStorage(keyValueStorage) {\n    this.keyValueStorage = keyValueStorage;\n  }\n  setAuthConfig(authConfig) {\n    this.authConfig = authConfig;\n  }\n  async loadTokens() {\n    // TODO(v6): migration logic should be here\n    // Reading V5 tokens old format\n    try {\n      const authKeys = await this.getAuthKeys();\n      const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);\n      if (!accessTokenString) {\n        throw new AuthError({\n          name: 'NoSessionFoundException',\n          message: 'Auth session was not found. Make sure to call signIn.'\n        });\n      }\n      const accessToken = decodeJWT(accessTokenString);\n      const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);\n      const idToken = itString ? decodeJWT(itString) : undefined;\n      const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ?? undefined;\n      const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';\n      const clockDrift = Number.parseInt(clockDriftString);\n      const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);\n      const tokens = {\n        accessToken,\n        idToken,\n        refreshToken,\n        deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,\n        clockDrift,\n        username: await this.getLastAuthUser()\n      };\n      if (signInDetails) {\n        tokens.signInDetails = JSON.parse(signInDetails);\n      }\n      return tokens;\n    } catch (err) {\n      return null;\n    }\n  }\n  async storeTokens(tokens) {\n    assert(tokens !== undefined, TokenProviderErrorCode.InvalidAuthTokens);\n    const lastAuthUser = tokens.username;\n    await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);\n    const authKeys = await this.getAuthKeys();\n    await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());\n    if (tokens.idToken) {\n      await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());\n    } else {\n      await this.getKeyValueStorage().removeItem(authKeys.idToken);\n    }\n    if (tokens.refreshToken) {\n      await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);\n    } else {\n      await this.getKeyValueStorage().removeItem(authKeys.refreshToken);\n    }\n    if (tokens.deviceMetadata) {\n      if (tokens.deviceMetadata.deviceKey) {\n        await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);\n      }\n      if (tokens.deviceMetadata.deviceGroupKey) {\n        await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);\n      }\n      await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);\n    }\n    if (tokens.signInDetails) {\n      await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));\n    } else {\n      await this.getKeyValueStorage().removeItem(authKeys.signInDetails);\n    }\n    await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);\n  }\n  async clearTokens() {\n    const authKeys = await this.getAuthKeys();\n    // Not calling clear because it can remove data that is not managed by AuthTokenStore\n    await Promise.all([this.getKeyValueStorage().removeItem(authKeys.accessToken), this.getKeyValueStorage().removeItem(authKeys.idToken), this.getKeyValueStorage().removeItem(authKeys.clockDrift), this.getKeyValueStorage().removeItem(authKeys.refreshToken), this.getKeyValueStorage().removeItem(authKeys.signInDetails), this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()), this.getKeyValueStorage().removeItem(authKeys.oauthMetadata)]);\n  }\n  async getDeviceMetadata(username) {\n    const authKeys = await this.getAuthKeys(username);\n    const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);\n    const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);\n    const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);\n    return randomPassword && deviceGroupKey && deviceKey ? {\n      deviceKey,\n      deviceGroupKey,\n      randomPassword\n    } : null;\n  }\n  async clearDeviceMetadata(username) {\n    const authKeys = await this.getAuthKeys(username);\n    await Promise.all([this.getKeyValueStorage().removeItem(authKeys.deviceKey), this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey), this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey)]);\n  }\n  async getAuthKeys(username) {\n    assertTokenProviderConfig(this.authConfig?.Cognito);\n    const lastAuthUser = username ?? (await this.getLastAuthUser());\n    return createKeysForAuthStorage(AUTH_KEY_PREFIX, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);\n  }\n  getLastAuthUserKey() {\n    assertTokenProviderConfig(this.authConfig?.Cognito);\n    const identifier = this.authConfig.Cognito.userPoolClientId;\n    return `${AUTH_KEY_PREFIX}.${identifier}.LastAuthUser`;\n  }\n  async getLastAuthUser() {\n    const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ?? 'username';\n    return lastAuthUser;\n  }\n  async setOAuthMetadata(metadata) {\n    const {\n      oauthMetadata: oauthMetadataKey\n    } = await this.getAuthKeys();\n    await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));\n  }\n  async getOAuthMetadata() {\n    const {\n      oauthMetadata: oauthMetadataKey\n    } = await this.getAuthKeys();\n    const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);\n    return oauthMetadata && JSON.parse(oauthMetadata);\n  }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n  return getAuthStorageKeys(AuthTokenStorageKeys)(`${provider}`, identifier);\n};\nfunction getAuthStorageKeys(authKeys) {\n  const keys = Object.values({\n    ...authKeys\n  });\n  return (prefix, identifier) => keys.reduce((acc, authKey) => ({\n    ...acc,\n    [authKey]: `${prefix}.${identifier}.${authKey}`\n  }), {});\n}\nexport { DefaultTokenStore, createKeysForAuthStorage, getAuthStorageKeys };","map":{"version":3,"names":["DefaultTokenStore","getKeyValueStorage","keyValueStorage","AuthError","name","message","setKeyValueStorage","setAuthConfig","authConfig","loadTokens","authKeys","getAuthKeys","accessTokenString","getItem","accessToken","decodeJWT","itString","idToken","undefined","refreshToken","clockDriftString","clockDrift","Number","parseInt","signInDetails","tokens","deviceMetadata","getDeviceMetadata","username","getLastAuthUser","JSON","parse","err","storeTokens","assert","TokenProviderErrorCode","InvalidAuthTokens","lastAuthUser","setItem","getLastAuthUserKey","toString","removeItem","deviceKey","deviceGroupKey","randomPasswordKey","randomPassword","stringify","clearTokens","Promise","all","oauthMetadata","clearDeviceMetadata","assertTokenProviderConfig","Cognito","createKeysForAuthStorage","AUTH_KEY_PREFIX","userPoolClientId","identifier","setOAuthMetadata","metadata","oauthMetadataKey","getOAuthMetadata","provider","getAuthStorageKeys","AuthTokenStorageKeys","keys","Object","values","prefix","reduce","acc","authKey"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/TokenStore.ts"],"sourcesContent":["import { assertTokenProviderConfig, decodeJWT, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { AuthTokenStorageKeys, } from './types';\nimport { TokenProviderErrorCode, assert } from './errorHelpers';\nimport { AUTH_KEY_PREFIX } from './constants';\nexport class DefaultTokenStore {\n    getKeyValueStorage() {\n        if (!this.keyValueStorage) {\n            throw new AuthError({\n                name: 'KeyValueStorageNotFoundException',\n                message: 'KeyValueStorage was not found in TokenStore',\n            });\n        }\n        return this.keyValueStorage;\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    setAuthConfig(authConfig) {\n        this.authConfig = authConfig;\n    }\n    async loadTokens() {\n        // TODO(v6): migration logic should be here\n        // Reading V5 tokens old format\n        try {\n            const authKeys = await this.getAuthKeys();\n            const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);\n            if (!accessTokenString) {\n                throw new AuthError({\n                    name: 'NoSessionFoundException',\n                    message: 'Auth session was not found. Make sure to call signIn.',\n                });\n            }\n            const accessToken = decodeJWT(accessTokenString);\n            const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);\n            const idToken = itString ? decodeJWT(itString) : undefined;\n            const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ??\n                undefined;\n            const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';\n            const clockDrift = Number.parseInt(clockDriftString);\n            const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);\n            const tokens = {\n                accessToken,\n                idToken,\n                refreshToken,\n                deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,\n                clockDrift,\n                username: await this.getLastAuthUser(),\n            };\n            if (signInDetails) {\n                tokens.signInDetails = JSON.parse(signInDetails);\n            }\n            return tokens;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    async storeTokens(tokens) {\n        assert(tokens !== undefined, TokenProviderErrorCode.InvalidAuthTokens);\n        const lastAuthUser = tokens.username;\n        await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);\n        const authKeys = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());\n        if (tokens.idToken) {\n            await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.idToken);\n        }\n        if (tokens.refreshToken) {\n            await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.refreshToken);\n        }\n        if (tokens.deviceMetadata) {\n            if (tokens.deviceMetadata.deviceKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);\n            }\n            if (tokens.deviceMetadata.deviceGroupKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);\n            }\n            await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);\n        }\n        if (tokens.signInDetails) {\n            await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.signInDetails);\n        }\n        await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);\n    }\n    async clearTokens() {\n        const authKeys = await this.getAuthKeys();\n        // Not calling clear because it can remove data that is not managed by AuthTokenStore\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.accessToken),\n            this.getKeyValueStorage().removeItem(authKeys.idToken),\n            this.getKeyValueStorage().removeItem(authKeys.clockDrift),\n            this.getKeyValueStorage().removeItem(authKeys.refreshToken),\n            this.getKeyValueStorage().removeItem(authKeys.signInDetails),\n            this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),\n            this.getKeyValueStorage().removeItem(authKeys.oauthMetadata),\n        ]);\n    }\n    async getDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);\n        const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);\n        const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);\n        return randomPassword && deviceGroupKey && deviceKey\n            ? {\n                deviceKey,\n                deviceGroupKey,\n                randomPassword,\n            }\n            : null;\n    }\n    async clearDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.deviceKey),\n            this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey),\n            this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey),\n        ]);\n    }\n    async getAuthKeys(username) {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const lastAuthUser = username ?? (await this.getLastAuthUser());\n        return createKeysForAuthStorage(AUTH_KEY_PREFIX, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);\n    }\n    getLastAuthUserKey() {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const identifier = this.authConfig.Cognito.userPoolClientId;\n        return `${AUTH_KEY_PREFIX}.${identifier}.LastAuthUser`;\n    }\n    async getLastAuthUser() {\n        const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ??\n            'username';\n        return lastAuthUser;\n    }\n    async setOAuthMetadata(metadata) {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));\n    }\n    async getOAuthMetadata() {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);\n        return oauthMetadata && JSON.parse(oauthMetadata);\n    }\n}\nexport const createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(AuthTokenStorageKeys)(`${provider}`, identifier);\n};\nexport function getAuthStorageKeys(authKeys) {\n    const keys = Object.values({ ...authKeys });\n    return (prefix, identifier) => keys.reduce((acc, authKey) => ({\n        ...acc,\n        [authKey]: `${prefix}.${identifier}.${authKey}`,\n    }), {});\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}