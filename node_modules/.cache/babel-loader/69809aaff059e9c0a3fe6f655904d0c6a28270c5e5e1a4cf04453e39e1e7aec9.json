{"ast":null,"code":"import _objectSpread from \"/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = method => !['HEAD', 'GET'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async (_ref, _ref2) => {\n  var _resp$headers, _resp$body;\n  let {\n    url,\n    method,\n    headers,\n    body\n  } = _ref;\n  let {\n    abortSignal,\n    cache,\n    withCrossDomainCredentials\n  } = _ref2;\n  let resp;\n  try {\n    resp = await fetch(url, {\n      method,\n      headers,\n      body: shouldSendBody(method) ? body : undefined,\n      signal: abortSignal,\n      cache,\n      credentials: withCrossDomainCredentials ? 'include' : 'same-origin'\n    });\n  } catch (e) {\n    if (e instanceof TypeError) {\n      throw new AmplifyError({\n        name: AmplifyErrorCode.NetworkError,\n        message: 'A network error has occurred.',\n        underlyingError: e\n      });\n    }\n    throw e;\n  }\n  const responseHeaders = {};\n  (_resp$headers = resp.headers) === null || _resp$headers === void 0 || _resp$headers.forEach((value, key) => {\n    responseHeaders[key.toLowerCase()] = value;\n  });\n  const httpResponse = {\n    statusCode: resp.status,\n    headers: responseHeaders,\n    body: null\n  };\n  // resp.body is a ReadableStream according to Fetch API spec, but React Native\n  // does not implement it.\n  const bodyWithMixin = Object.assign((_resp$body = resp.body) !== null && _resp$body !== void 0 ? _resp$body : {}, {\n    text: withMemoization(() => resp.text()),\n    blob: withMemoization(() => resp.blob()),\n    json: withMemoization(() => resp.json())\n  });\n  return _objectSpread(_objectSpread({}, httpResponse), {}, {\n    body: bodyWithMixin\n  });\n};\nexport { fetchTransferHandler };","map":{"version":3,"names":["shouldSendBody","method","includes","toUpperCase","fetchTransferHandler","_ref","_ref2","_resp$headers","_resp$body","url","headers","body","abortSignal","cache","withCrossDomainCredentials","resp","fetch","undefined","signal","credentials","e","TypeError","AmplifyError","name","AmplifyErrorCode","NetworkError","message","underlyingError","responseHeaders","forEach","value","key","toLowerCase","httpResponse","statusCode","status","bodyWithMixin","Object","assign","text","withMemoization","blob","json","_objectSpread"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@aws-amplify/core/src/clients/handlers/fetch.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError } from '../../errors';\nimport { withMemoization } from '../utils/memoization';\nimport { AmplifyErrorCode } from '../../types';\nconst shouldSendBody = (method) => !['HEAD', 'GET'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nexport const fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n"],"mappings":";;;;;;AAAA;AACA;AAIA,MAAMA,cAAc,GAAIC,MAAM,IAAK,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,CAACC,QAAQ,CAACD,MAAM,CAACE,WAAW,EAAE,CAAC;AAClF;AACY,MAACC,oBAAoB,GAAG,MAAAA,CAAAC,IAAA,EAAAC,KAAA,KAA8F;EAAA,IAAAC,aAAA,EAAAC,UAAA;EAAA,IAAvF;IAAEC,GAAG;IAAER,MAAM;IAAES,OAAO;IAAEC;EAAI,CAAE,GAAAN,IAAA;EAAA,IAAE;IAAEO,WAAW;IAAEC,KAAK;IAAEC;EAA0B,CAAE,GAAAR,KAAA;EACzH,IAAIS,IAAI;EACR,IAAI;IACAA,IAAI,GAAG,MAAMC,KAAK,CAACP,GAAG,EAAE;MACpBR,MAAM;MACNS,OAAO;MACPC,IAAI,EAAEX,cAAc,CAACC,MAAM,CAAC,GAAGU,IAAI,GAAGM,SAAS;MAC/CC,MAAM,EAAEN,WAAW;MACnBC,KAAK;MACLM,WAAW,EAAEL,0BAA0B,GAAG,SAAS,GAAG;IAClE,CAAS,CAAC;EACN,EACA,OAAOM,CAAC,EAAE;IACN,IAAIA,CAAC,YAAYC,SAAS,EAAE;MACxB,MAAM,IAAIC,YAAY,CAAC;QACnBC,IAAI,EAAEC,gBAAgB,CAACC,YAAY;QACnCC,OAAO,EAAE,+BAA+B;QACxCC,eAAe,EAAEP;MACjC,CAAa,CAAC;IACN;IACA,MAAMA,CAAC;EACX;EACA,MAAMQ,eAAe,GAAG,EAAE;EAC1B,CAAArB,aAAA,GAAAQ,IAAI,CAACL,OAAO,cAAAH,aAAA,eAAZA,aAAA,CAAcsB,OAAO,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAK;IAClCH,eAAe,CAACG,GAAG,CAACC,WAAW,EAAE,CAAC,GAAGF,KAAK;EAC9C,CAAC,CAAC;EACF,MAAMG,YAAY,GAAG;IACjBC,UAAU,EAAEnB,IAAI,CAACoB,MAAM;IACvBzB,OAAO,EAAEkB,eAAe;IACxBjB,IAAI,EAAE;EACd,CAAK;EACL;EACA;EACI,MAAMyB,aAAa,GAAGC,MAAM,CAACC,MAAM,EAAA9B,UAAA,GAACO,IAAI,CAACJ,IAAI,cAAAH,UAAA,cAAAA,UAAA,GAAI,EAAE,EAAE;IACjD+B,IAAI,EAAEC,eAAe,CAAC,MAAMzB,IAAI,CAACwB,IAAI,EAAE,CAAC;IACxCE,IAAI,EAAED,eAAe,CAAC,MAAMzB,IAAI,CAAC0B,IAAI,EAAE,CAAC;IACxCC,IAAI,EAAEF,eAAe,CAAC,MAAMzB,IAAI,CAAC2B,IAAI,EAAE;EAC/C,CAAK,CAAC;EACF,OAAAC,aAAA,CAAAA,aAAA,KACOV,YAAY;IACftB,IAAI,EAAEyB;EAAa;AAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}