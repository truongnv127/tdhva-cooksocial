{"ast":null,"code":"import { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../../utils/types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCurrentUser = async amplify => {\n  var _amplify$getConfig$Au, _tokens$idToken$paylo, _tokens$idToken;\n  const authConfig = (_amplify$getConfig$Au = amplify.getConfig().Auth) === null || _amplify$getConfig$Au === void 0 ? void 0 : _amplify$getConfig$Au.Cognito;\n  assertTokenProviderConfig(authConfig);\n  const tokens = await amplify.Auth.getTokens({\n    forceRefresh: false\n  });\n  assertAuthTokens(tokens);\n  const {\n    'cognito:username': username,\n    sub\n  } = (_tokens$idToken$paylo = (_tokens$idToken = tokens.idToken) === null || _tokens$idToken === void 0 ? void 0 : _tokens$idToken.payload) !== null && _tokens$idToken$paylo !== void 0 ? _tokens$idToken$paylo : {};\n  const authUser = {\n    username: username,\n    userId: sub\n  };\n  const signInDetails = getSignInDetailsFromTokens(tokens);\n  if (signInDetails) {\n    authUser.signInDetails = signInDetails;\n  }\n  return authUser;\n};\nfunction getSignInDetailsFromTokens(tokens) {\n  return tokens === null || tokens === void 0 ? void 0 : tokens.signInDetails;\n}\nexport { getCurrentUser };","map":{"version":3,"names":["getCurrentUser","amplify","_amplify$getConfig$Au","_tokens$idToken$paylo","_tokens$idToken","authConfig","getConfig","Auth","Cognito","assertTokenProviderConfig","tokens","getTokens","forceRefresh","assertAuthTokens","username","sub","idToken","payload","authUser","userId","signInDetails","getSignInDetailsFromTokens"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@aws-amplify/auth/src/providers/cognito/apis/internal/getCurrentUser.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../../utils/types';\nexport const getCurrentUser = async (amplify) => {\n    const authConfig = amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const tokens = await amplify.Auth.getTokens({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const { 'cognito:username': username, sub } = tokens.idToken?.payload ?? {};\n    const authUser = {\n        username: username,\n        userId: sub,\n    };\n    const signInDetails = getSignInDetailsFromTokens(tokens);\n    if (signInDetails) {\n        authUser.signInDetails = signInDetails;\n    }\n    return authUser;\n};\nfunction getSignInDetailsFromTokens(tokens) {\n    return tokens?.signInDetails;\n}\n"],"mappings":";;;AAAA;AACA;AAGY,MAACA,cAAc,GAAG,MAAOC,OAAO,IAAK;EAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,eAAA;EAC7C,MAAMC,UAAU,IAAAH,qBAAA,GAAGD,OAAO,CAACK,SAAS,EAAE,CAACC,IAAI,cAAAL,qBAAA,uBAAxBA,qBAAA,CAA0BM,OAAO;EACpDC,yBAAyB,CAACJ,UAAU,CAAC;EACrC,MAAMK,MAAM,GAAG,MAAMT,OAAO,CAACM,IAAI,CAACI,SAAS,CAAC;IAAEC,YAAY,EAAE;EAAK,CAAE,CAAC;EACpEC,gBAAgB,CAACH,MAAM,CAAC;EACxB,MAAM;IAAE,kBAAkB,EAAEI,QAAQ;IAAEC;EAAG,CAAE,IAAAZ,qBAAA,IAAAC,eAAA,GAAGM,MAAM,CAACM,OAAO,cAAAZ,eAAA,uBAAdA,eAAA,CAAgBa,OAAO,cAAAd,qBAAA,cAAAA,qBAAA,GAAI,EAAE;EAC3E,MAAMe,QAAQ,GAAG;IACbJ,QAAQ,EAAEA,QAAQ;IAClBK,MAAM,EAAEJ;EAChB,CAAK;EACD,MAAMK,aAAa,GAAGC,0BAA0B,CAACX,MAAM,CAAC;EACxD,IAAIU,aAAa,EAAE;IACfF,QAAQ,CAACE,aAAa,GAAGA,aAAa;EAC1C;EACA,OAAOF,QAAQ;AACnB;AACA,SAASG,0BAA0BA,CAACX,MAAM,EAAE;EACxC,OAAOA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEU,aAAa;AAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}