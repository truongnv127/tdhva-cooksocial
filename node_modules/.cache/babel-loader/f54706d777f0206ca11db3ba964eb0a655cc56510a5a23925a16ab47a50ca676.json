{"ast":null,"code":"import { invalidOriginException, invalidRedirectException, invalidPreferredRedirectUrlException } from '../../../../errors/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/** @internal */\nfunction getRedirectUrl(redirects, preferredRedirectUrl) {\n  if (preferredRedirectUrl) {\n    const redirectUrl = redirects === null || redirects === void 0 ? void 0 : redirects.find(redirect => redirect === preferredRedirectUrl);\n    if (!redirectUrl) {\n      throw invalidPreferredRedirectUrlException;\n    }\n    return redirectUrl;\n  } else {\n    var _redirects$find, _redirects$find2;\n    const redirectUrlFromTheSameOrigin = (_redirects$find = redirects === null || redirects === void 0 ? void 0 : redirects.find(isSameOriginAndPathName)) !== null && _redirects$find !== void 0 ? _redirects$find : redirects === null || redirects === void 0 ? void 0 : redirects.find(isTheSameDomain);\n    const redirectUrlFromDifferentOrigin = (_redirects$find2 = redirects === null || redirects === void 0 ? void 0 : redirects.find(isHttps)) !== null && _redirects$find2 !== void 0 ? _redirects$find2 : redirects === null || redirects === void 0 ? void 0 : redirects.find(isHttp);\n    if (redirectUrlFromTheSameOrigin) {\n      return redirectUrlFromTheSameOrigin;\n    } else if (redirectUrlFromDifferentOrigin) {\n      throw invalidOriginException;\n    }\n    throw invalidRedirectException;\n  }\n}\n// origin + pathname => https://example.com/app\nconst isSameOriginAndPathName = redirect => redirect.startsWith(String(window.location.origin + (window.location.pathname || '/')));\n// domain => outlook.live.com, github.com\nconst isTheSameDomain = redirect => redirect.includes(String(window.location.hostname));\nconst isHttp = redirect => redirect.startsWith('http://');\nconst isHttps = redirect => redirect.startsWith('https://');\nexport { getRedirectUrl };","map":{"version":3,"names":["getRedirectUrl","redirects","preferredRedirectUrl","redirectUrl","find","redirect","invalidPreferredRedirectUrlException","_redirects$find","_redirects$find2","redirectUrlFromTheSameOrigin","isSameOriginAndPathName","isTheSameDomain","redirectUrlFromDifferentOrigin","isHttps","isHttp","invalidOriginException","invalidRedirectException","startsWith","String","window","location","origin","pathname","includes","hostname"],"sources":["/home/truongnvops/Documents/Project_AWS/tdhva-cooksocial/frontend/node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/getRedirectUrl.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { invalidOriginException, invalidPreferredRedirectUrlException, invalidRedirectException, } from '../../../../errors/constants';\n/** @internal */\nexport function getRedirectUrl(redirects, preferredRedirectUrl) {\n    if (preferredRedirectUrl) {\n        const redirectUrl = redirects?.find(redirect => redirect === preferredRedirectUrl);\n        if (!redirectUrl) {\n            throw invalidPreferredRedirectUrlException;\n        }\n        return redirectUrl;\n    }\n    else {\n        const redirectUrlFromTheSameOrigin = redirects?.find(isSameOriginAndPathName) ??\n            redirects?.find(isTheSameDomain);\n        const redirectUrlFromDifferentOrigin = redirects?.find(isHttps) ?? redirects?.find(isHttp);\n        if (redirectUrlFromTheSameOrigin) {\n            return redirectUrlFromTheSameOrigin;\n        }\n        else if (redirectUrlFromDifferentOrigin) {\n            throw invalidOriginException;\n        }\n        throw invalidRedirectException;\n    }\n}\n// origin + pathname => https://example.com/app\nconst isSameOriginAndPathName = (redirect) => redirect.startsWith(String(window.location.origin + (window.location.pathname || '/')));\n// domain => outlook.live.com, github.com\nconst isTheSameDomain = (redirect) => redirect.includes(String(window.location.hostname));\nconst isHttp = (redirect) => redirect.startsWith('http://');\nconst isHttps = (redirect) => redirect.startsWith('https://');\n"],"mappings":";;AAAA;AACA;AAEA;AACO,SAASA,cAAcA,CAACC,SAAS,EAAEC,oBAAoB,EAAE;EAC5D,IAAIA,oBAAoB,EAAE;IACtB,MAAMC,WAAW,GAAGF,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,IAAI,CAACC,QAAQ,IAAIA,QAAQ,KAAKH,oBAAoB,CAAC;IAClF,IAAI,CAACC,WAAW,EAAE;MACd,MAAMG,oCAAoC;IAC9C;IACA,OAAOH,WAAW;EACtB,OACK;IAAA,IAAAI,eAAA,EAAAC,gBAAA;IACD,MAAMC,4BAA4B,IAAAF,eAAA,GAAGN,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,IAAI,CAACM,uBAAuB,CAAC,cAAAH,eAAA,cAAAA,eAAA,GACzEN,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,IAAI,CAACO,eAAe,CAAC;IACpC,MAAMC,8BAA8B,IAAAJ,gBAAA,GAAGP,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,IAAI,CAACS,OAAO,CAAC,cAAAL,gBAAA,cAAAA,gBAAA,GAAIP,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,IAAI,CAACU,MAAM,CAAC;IAC1F,IAAIL,4BAA4B,EAAE;MAC9B,OAAOA,4BAA4B;IACvC,OACK,IAAIG,8BAA8B,EAAE;MACrC,MAAMG,sBAAsB;IAChC;IACA,MAAMC,wBAAwB;EAClC;AACJ;AACA;AACA,MAAMN,uBAAuB,GAAIL,QAAQ,IAAKA,QAAQ,CAACY,UAAU,CAACC,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,IAAIF,MAAM,CAACC,QAAQ,CAACE,QAAQ,IAAI,GAAG,CAAC,CAAC,CAAC;AACrI;AACA,MAAMX,eAAe,GAAIN,QAAQ,IAAKA,QAAQ,CAACkB,QAAQ,CAACL,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACI,QAAQ,CAAC,CAAC;AACzF,MAAMV,MAAM,GAAIT,QAAQ,IAAKA,QAAQ,CAACY,UAAU,CAAC,SAAS,CAAC;AAC3D,MAAMJ,OAAO,GAAIR,QAAQ,IAAKA,QAAQ,CAACY,UAAU,CAAC,UAAU,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}